{"ast":null,"code":"import _asyncToGenerator from\"/var/jenkins_home/workspace/pipeline-test/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/var/jenkins_home/workspace/pipeline-test/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/var/jenkins_home/workspace/pipeline-test/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/var/jenkins_home/workspace/pipeline-test/node_modules/@babel/runtime/regenerator/index.js\";import*as React from'react';import Button from'@mui/material/Button';import TextField from'@mui/material/TextField';import FormControlLabel from'@mui/material/FormControlLabel';import Checkbox from'@mui/material/Checkbox';import Link from'@mui/material/Link';import Stack from'@mui/material/Stack';import Box from'@mui/material/Box';import Typography from'@mui/material/Typography';import Container from'@mui/material/Container';import{useLocation}from'react-router-dom';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Copyright(props){return/*#__PURE__*/_jsxs(Typography,_objectSpread(_objectSpread({variant:\"body2\",color:\"text.secondary\",align:\"center\"},props),{},{children:['Produce404© ',/*#__PURE__*/_jsx(Link,{color:\"inherit\",href:\"../\",children:\"\\uBAA8\\uB450\\uC758 \\uC218\\uAC15\\uC2E0\\uCCAD\"}),' ',new Date().getFullYear(),'.']}));}function SignIn(){// Homepage에서 univ값 가져온거 확인 & 변수 할당\nvar univName=sessionStorage.getItem(\"univ\");// id, passwd, isManager\nvar _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),userId=_React$useState2[0],setUserId=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),passwd=_React$useState4[0],setPasswd=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isManager=_React$useState6[0],setManager=_React$useState6[1];// Send FormData to Server\nvar handlePost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(joinData){var dir;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dir=joinData.isManager;_context.next=3;return axios({url:'/api/login',method:\"POST\",baseURL:'http://localhost:8080',withCredentials:true,data:joinData}).then(function callback(response){// 사용자 정보 SessionStorage에 저장\nsessionStorage.setItem('id',userId);// response(isManager)의 값에 따라 이동\n// response(isManager)의 값에 따라 이동\nif(response.data===true){if(dir===true){window.location.href='/manage';}else{window.location.href='/student';}}else{alert(\"ID 또는 비밀번호가 잘못되었습니다.\");}}).catch(function CallbackERROR(response){alert(\"ERROR!\");});case 3:case\"end\":return _context.stop();}}},_callee);}));return function handlePost(_x){return _ref.apply(this,arguments);};}();// Handle isManager checkbox\nvar handleManager=function handleManager(e){e.target.checked?setManager(true):setManager(false);};// Handle Submit\nvar handleSubmit=function handleSubmit(e){e.preventDefault();var data=new FormData(e.currentTarget);var joinData={univ:univName,id:univName+'@'+data.get('userId'),password:data.get('password'),isManager:isManager};console.log(joinData);// Validation check 염두\nif(true){handlePost(joinData);}};return/*#__PURE__*/_jsxs(Container,{component:\"main\",maxWidth:\"xs\",children:[/*#__PURE__*/_jsxs(Box,{sx:{marginTop:8,display:'flex',flexDirection:'column',alignItems:'center'},component:\"form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{value:isManager,name:\"LogIn_CheckBox\",id:\"checkbox\",color:\"primary\",onChange:handleManager}),label:\"manager\"}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,variant:\"outlined\",id:\"userId\",label:\"Username\",name:\"userId\",autoComplete:\"userId\",autoFocus:true,onChange:function onChange(e){setUserId(e.target.value);}}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,variant:\"outlined\",id:\"password\",label:\"Password\",name:\"password\",type:\"password\",autoComplete:\"current-password\",onChange:function onChange(e){setPasswd(e.target.value);}}),/*#__PURE__*/_jsxs(Stack,{spacint:2,direction:\"row\",children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",sx:{mt:3,mb:2},children:\" SIGN IN \"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",sx:{mt:3,mb:2,ml:5},children:\" ID/PW\\uCC3E\\uAE30 \"})]})]}),/*#__PURE__*/_jsx(Copyright,{sx:{mt:8,mb:4}})]});}export default SignIn;","map":{"version":3,"sources":["/var/jenkins_home/workspace/pipeline-test/src/components/SignIn.js"],"names":["React","Button","TextField","FormControlLabel","Checkbox","Link","Stack","Box","Typography","Container","useLocation","axios","Copyright","props","Date","getFullYear","SignIn","univName","sessionStorage","getItem","useState","userId","setUserId","passwd","setPasswd","isManager","setManager","handlePost","joinData","dir","url","method","baseURL","withCredentials","data","then","callback","response","setItem","window","location","href","alert","catch","CallbackERROR","handleManager","e","target","checked","handleSubmit","preventDefault","FormData","currentTarget","univ","id","get","password","console","log","marginTop","display","flexDirection","alignItems","value","mt","mb","ml"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport Checkbox from '@mui/material/Checkbox';\nimport Link from '@mui/material/Link';\nimport Stack from '@mui/material/Stack';\nimport Box from '@mui/material/Box';\nimport Typography from '@mui/material/Typography';\nimport Container from '@mui/material/Container';\nimport { useLocation } from 'react-router-dom';\nimport axios from 'axios';\n\nfunction Copyright(props) {\n  return (\n    <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" {...props}>\n      {'Produce404© '}\n      <Link color=\"inherit\" href=\"../\">\n        모두의 수강신청\n      </Link>{' '}\n      {new Date().getFullYear()}\n      {'.'}\n    </Typography>\n  );\n}\n\nfunction SignIn() {\n  // Homepage에서 univ값 가져온거 확인 & 변수 할당\n  const univName = sessionStorage.getItem(\"univ\");\n\n  // id, passwd, isManager\n  const [userId, setUserId] = React.useState(\"\");\n  const [passwd, setPasswd] = React.useState(\"\");\n  const [isManager, setManager] = React.useState(false);\n\n  // Send FormData to Server\n  const handlePost = async(joinData) =>{\n    const dir = joinData.isManager;\n    await axios({\n      url: '/api/login',\n      method: \"POST\",\n      baseURL: 'http://localhost:8080',\n      withCredentials: true,\n      data: joinData\n    })\n    .then(function callback(response){\n      // 사용자 정보 SessionStorage에 저장\n      sessionStorage.setItem('id', userId);\n\n      // response(isManager)의 값에 따라 이동\n      if (response.data === true){\n        if (dir === true){\n          window.location.href = '/manage';\n        }\n        else{\n          window.location.href = '/student';\n        }\n      }\n      else{\n        alert(\"ID 또는 비밀번호가 잘못되었습니다.\")\n      }\n    })\n    .catch(  function CallbackERROR(response){\n      alert(\"ERROR!\");\n    });\n  };\n\n  // Handle isManager checkbox\n  const handleManager = (e) => {\n    e.target.checked ? setManager(true) : setManager(false);\n  }\n\n  // Handle Submit\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    const data = new FormData(e.currentTarget);\n    const joinData = {\n      univ: univName,\n      id: univName + '@' + data.get('userId'),\n      password: data.get('password'),\n      isManager,\n    };\n    console.log(joinData)\n\n    // Validation check 염두\n    if(true){\n      handlePost(joinData);\n    }\n  }\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <Box\n          sx={{\n            marginTop: 8,\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n          }}\n          component=\"form\"\n          onSubmit={handleSubmit}\n        >\n        <FormControlLabel\n            control={<Checkbox value={isManager} name=\"LogIn_CheckBox\" id=\"checkbox\" color=\"primary\" onChange={handleManager} />}\n            label=\"manager\"\n        />\n        <TextField margin=\"normal\" required fullWidth variant='outlined' id=\"userId\" label=\"Username\" name=\"userId\" autoComplete=\"userId\" autoFocus onChange={(e)=>{\n          setUserId(e.target.value)\n        }} />\n        <TextField margin=\"normal\" required fullWidth variant='outlined' id=\"password\" label=\"Password\" name=\"password\" type=\"password\" autoComplete=\"current-password\" onChange={(e) => {\n          setPasswd(e.target.value)\n        }}/>\n        \n        <Stack spacint={2} direction=\"row\">\n        <Button type=\"submit\" variant=\"contained\" sx={{ mt: 3, mb: 2}}> SIGN IN </Button>\n        <Button variant=\"contained\" sx={{ mt: 3, mb: 2, ml: 5 }}> ID/PW찾기 </Button>\n        </Stack>\n      </Box>\n      <Copyright sx={{ mt: 8, mb: 4}} />     \n    </Container>\n\n  );\n}\n\nexport default SignIn"]},"metadata":{},"sourceType":"module"}