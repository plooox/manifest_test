{"ast":null,"code":"import _asyncToGenerator from\"/var/jenkins_home/workspace/pipeline-test/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/var/jenkins_home/workspace/pipeline-test/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"/var/jenkins_home/workspace/pipeline-test/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/var/jenkins_home/workspace/pipeline-test/node_modules/@babel/runtime/regenerator/index.js\";import*as React from'react';import ClassTable from'./ClassSearchTable';import axios from'axios';import{Box,Select,MenuItem,Input}from'@mui/material';// Define a default UI for filtering\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function DefaultColumnFilter(_ref){var _ref$column=_ref.column,filterValue=_ref$column.filterValue,preFilteredRows=_ref$column.preFilteredRows,setFilter=_ref$column.setFilter;return/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Input,{sx:{minWidth:70},value:filterValue||'',onChange:function onChange(e){setFilter(e.target.value||undefined);// Set undefined to remove the filter entirely\n},placeholder:\"Search\"})});}function NullColumnFilter(_ref2){var _ref2$column=_ref2.column,filterValue=_ref2$column.filterValue,preFilteredRows=_ref2$column.preFilteredRows,setFilter=_ref2$column.setFilter;return/*#__PURE__*/_jsx(Box,{sx:{minWidth:70}});}// Selection Filter\nfunction SelectColumnFilter(_ref3){var _ref3$column=_ref3.column,filterValue=_ref3$column.filterValue,setFilter=_ref3$column.setFilter,preFilteredRows=_ref3$column.preFilteredRows,id=_ref3$column.id;// Calculate the options for filtering\n// using the preFilteredRows\nvar options=React.useMemo(function(){var options=new Set();preFilteredRows.forEach(function(row){options.add(row.values[id]);});return _toConsumableArray(options.values());},[id,preFilteredRows]);// Render a multi-select box\nreturn/*#__PURE__*/_jsx(Box,{sx:{minWidth:70},children:/*#__PURE__*/_jsxs(Select,{sx:{minWidth:70},value:filterValue,defaultValue:\"\",onChange:function onChange(e){setFilter(e.target.value||undefined);},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:\"All\"}),options.map(function(option,i){return/*#__PURE__*/_jsx(MenuItem,{value:option,children:option},i);})]})});}export default function Class(){// 서버에 api 요청 (GET)\nvar _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),resData=_React$useState2[0],setResData=_React$useState2[1];var InitGetMethod=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios({url:'api/student/class/'+sessionStorage.getItem('univ'),method:'GET',baseURL:'http://localhost:8080',withCredentials:true.valueOf}).then(function callback(response){// console.log(response.data)\nsetResData(response.data);}).catch(function CallbackERROR(response){console.log('fail');alert(\"ERROR\");window.location.href='/student';});case 2:case\"end\":return _context.stop();}}},_callee);}));return function InitGetMethod(){return _ref4.apply(this,arguments);};}();// Define Column\nvar columns=React.useMemo(function(){return[{accessor:'lecture_id',Header:'과목코드',Filter:DefaultColumnFilter},{accessor:'lecture_name',Header:'과목명',Filter:DefaultColumnFilter},{accessor:'lecture_major',Header:'학과',Filter:DefaultColumnFilter},{accessor:'lecture_professor',Header:'교수',Filter:DefaultColumnFilter},{accessor:'lecture_class',Header:'학년',Filter:SelectColumnFilter,filter:'includes'},{accessor:'lecture_classify',Header:'전공/교양',Filter:SelectColumnFilter,filter:'includes'},{accessor:'lecture_time',Header:'시간',Filter:DefaultColumnFilter},{accessor:'lecture_room',Header:'분반',Filter:NullColumnFilter},{accessor:'lecture_credit',Header:'학점',Filter:SelectColumnFilter,filter:'includes'},{accessor:'lecture_limit',Header:'잔여 인원',Filter:NullColumnFilter}];},[]);React.useEffect(function(){var univ=sessionStorage.getItem('univ');if(univ!==\"\"){// console.log(univ);\nInitGetMethod();}},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(ClassTable,{columns:columns,data:resData})});}","map":{"version":3,"sources":["/var/jenkins_home/workspace/pipeline-test/src/components/views/ClassSearch.js"],"names":["React","ClassTable","axios","Box","Select","MenuItem","Input","DefaultColumnFilter","column","filterValue","preFilteredRows","setFilter","minWidth","e","target","value","undefined","NullColumnFilter","SelectColumnFilter","id","options","useMemo","Set","forEach","row","add","values","map","option","i","Class","useState","resData","setResData","InitGetMethod","url","sessionStorage","getItem","method","baseURL","withCredentials","valueOf","then","callback","response","data","catch","CallbackERROR","console","log","alert","window","location","href","columns","accessor","Header","Filter","filter","useEffect","univ"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport ClassTable from './ClassSearchTable'\nimport axios from 'axios';\nimport { Box, Select, MenuItem, Input } from '@mui/material';\n\n// Define a default UI for filtering\nfunction DefaultColumnFilter({\n    column: { filterValue, preFilteredRows, setFilter },\n  }) {  \n    return (\n        <Box>\n            <Input\n                sx={{minWidth:70}}\n                value={filterValue || ''}\n                onChange={e => {\n                    setFilter(e.target.value || undefined) // Set undefined to remove the filter entirely\n                }}\n                placeholder={`Search`}\n            />\n        </Box>\n    )\n  }\nfunction NullColumnFilter({\n    column: { filterValue, preFilteredRows, setFilter },\n  }) {  \n    return (\n        <Box sx={{minWidth: 70 }}/>\n    )\n  }\n  \n  // Selection Filter\n  function SelectColumnFilter({\n    column: { filterValue, setFilter, preFilteredRows, id },\n  }) {\n    // Calculate the options for filtering\n    // using the preFilteredRows\n    const options = React.useMemo(() => {\n      const options = new Set()\n      preFilteredRows.forEach(row => {\n        options.add(row.values[id])\n      })\n      return [...options.values()]\n    }, [id, preFilteredRows])\n  \n    // Render a multi-select box\n    return (\n        <Box sx={{minWidth: 70 }}>\n            <Select\n                sx={{ minWidth: 70 }}\n                value={filterValue}\n                defaultValue=\"\"\n                onChange={e => {\n                setFilter(e.target.value || undefined)\n                }}\n            >\n                <MenuItem value=\"\">All</MenuItem>\n                {options.map((option, i) => (\n                <MenuItem key={i} value={option}>\n                    {option}\n                </MenuItem>\n                ))}\n            </Select>\n        </Box>\n    )\n  }\n\nexport default function Class() {\n\n    // 서버에 api 요청 (GET)\n    const [resData, setResData] = React.useState([]);\n    const InitGetMethod = async() => {\n        await axios({\n            url: 'api/student/class/'+sessionStorage.getItem('univ'),\n            method: 'GET',\n            baseURL: 'http://localhost:8080',\n            withCredentials: true.valueOf,\n        },\n        )\n        .then(function callback(response){\n            // console.log(response.data)\n            setResData(response.data);\n        })\n        .catch(function CallbackERROR(response){\n            console.log('fail');\n            alert(\"ERROR\");\n            window.location.href = '/student';\n        });\n    }\n\n    // Define Column\n    const columns = React.useMemo(\n        () => [\n            {\n                accessor: 'lecture_id' ,\n                Header: '과목코드',\n                Filter: DefaultColumnFilter,\n            },\n            {\n                accessor:  'lecture_name' ,\n                Header:     '과목명',\n                Filter: DefaultColumnFilter,\n            },\n            {\n                accessor: 'lecture_major',\n                Header: '학과',\n                Filter: DefaultColumnFilter,\n            },\n            {\n                accessor: 'lecture_professor',\n                Header: '교수',\n                Filter: DefaultColumnFilter,\n            },\n            {\n                accessor: 'lecture_class',\n                Header: '학년',\n                Filter: SelectColumnFilter,\n                filter: 'includes',\n            },\n            {\n                accessor:  'lecture_classify' ,\n                Header: '전공/교양',\n                Filter: SelectColumnFilter,\n                filter: 'includes',\n            },\n            {\n                accessor:   'lecture_time',\n                Header: '시간',\n                Filter: DefaultColumnFilter,\n            },\n            {\n                accessor:  'lecture_room' ,\n                Header: '분반',\n                Filter: NullColumnFilter,\n            },\n            {\n                accessor:  'lecture_credit' ,\n                Header: '학점',\n                Filter: SelectColumnFilter,\n                filter: 'includes',\n            },\n            {\n                accessor:  'lecture_limit' ,\n                Header: '잔여 인원',\n                Filter: NullColumnFilter,\n            },\n        ],\n        []\n    );\n\n\n    React.useEffect(() => {\n        const univ = sessionStorage.getItem('univ');\n        if(univ !== \"\" ){\n            // console.log(univ);\n            InitGetMethod();\n        }      \n    },[]);\n      \n    return (\n        <>\n        <ClassTable columns={columns} data={resData}></ClassTable>\n        </>\n    );\n    \n}\n"]},"metadata":{},"sourceType":"module"}