{"ast":null,"code":"import _asyncToGenerator from\"/var/jenkins_home/workspace/pipeline-test/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/var/jenkins_home/workspace/pipeline-test/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/var/jenkins_home/workspace/pipeline-test/node_modules/@babel/runtime/regenerator/index.js\";import*as React from'react';import MypageResultTable from'./MypageResultTable';import StudentMypageTimetable from'./StudentMypageTimetable';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function StuEnrolmentpageBox(){var _React$useState=React.useState(0),_React$useState2=_slicedToArray(_React$useState,2),major=_React$useState2[0],setMajor=_React$useState2[1];var _React$useState3=React.useState(0),_React$useState4=_slicedToArray(_React$useState3,2),culture=_React$useState4[0],setCulture=_React$useState4[1];var _React$useState5=React.useState(0),_React$useState6=_slicedToArray(_React$useState5,2),experiment=_React$useState6[0],setExperiment=_React$useState6[1];// 전공, 교양, 실험 학점 계산기\nvar settingSummary=function settingSummary(){var ma=0;var cu=0;var ex=0;for(var i=0;i<resData.length;i++){if(resData[i][\"lecture_classify\"]===\"전공\"){console.log(\"1\");ma=ma+resData[i][\"lecture_credit\"];}else if(resData[i][\"lecture_classify\"]===\"교양\"){console.log(\"2\");cu=cu+resData[i][\"lecture_credit\"];}else if(resData[i][\"lecture_classify\"]===\"실험\"){console.log(\"\");ex=ex+resData[i][\"lecture_credit\"];}}setMajor(ma);setCulture(cu);setExperiment(ex);};// 서버에 api 요청 (POST)\nvar _React$useState7=React.useState([]),_React$useState8=_slicedToArray(_React$useState7,2),resData=_React$useState8[0],setResData=_React$useState8[1];var InitPostMethod=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios({url:'api/student/Mypage',method:'POST',baseURL:'http://localhost:8080',withCredentials:true.valueOf,data:{univ:sessionStorage.getItem('univ'),id:sessionStorage.getItem('id')}}).then(function callback(response){// Table data -> 서버에서 받은 데이터\nsetResData(response.data);}).catch(function CallbackERROR(response){console.log('fail');alert(\"ERROR\");window.location.href='/student';});case 2:case\"end\":return _context.stop();}}},_callee);}));return function InitPostMethod(){return _ref.apply(this,arguments);};}();// Define Column\nvar columns=React.useMemo(function(){return[{accessor:'lecture_id',Header:'과목코드'},{accessor:'lecture_name',Header:'과목명'},{accessor:'lecture_major',Header:'학과'},{accessor:'lecture_professor',Header:'교수'},{accessor:'lecture_class',Header:'학년'},{accessor:'lecture_classify',Header:'전공/교양'},{accessor:'lecture_time',Header:'시간'},{accessor:'lecture_classroom',Header:'분반'},{accessor:'lecture_room',Header:'강의실'},{accessor:'lecture_credit',Header:'학점'}];},[]);// 한번만 실행\nReact.useEffect(function(){var univName=sessionStorage.getItem('univ');var ids=sessionStorage.getItem('id');if(univName!==\"\"&&ids!==\"\"){InitPostMethod();}},[]);// 값이 바뀔때마다 반복 실행\nReact.useEffect(function(){settingSummary();});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MypageResultTable,{columns:columns,data:resData}),/*#__PURE__*/_jsxs(\"table\",{border:\"1\",bordercolor:\"gray\",width:\"40%\",height:\"75\",align:\"left\",children:[/*#__PURE__*/_jsx(\"th\",{bgcolor:\"gray\",children:\"\\uC804\\uACF5 \\uD559\\uC810\"}),/*#__PURE__*/_jsx(\"th\",{bgcolor:\"gray\",children:\"\\uAD50\\uC591 \\uD559\\uC810\"}),/*#__PURE__*/_jsx(\"th\",{bgcolor:\"gray\",children:\"\\uC2E4\\uD5D8 \\uD559\\uC810\"}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:major}),/*#__PURE__*/_jsx(\"td\",{children:culture}),/*#__PURE__*/_jsx(\"td\",{children:experiment})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(StudentMypageTimetable,{data:resData})]});}","map":{"version":3,"sources":["/var/jenkins_home/workspace/pipeline-test/src/components/views/StudentMypageLayout.js"],"names":["React","MypageResultTable","StudentMypageTimetable","axios","StuEnrolmentpageBox","useState","major","setMajor","culture","setCulture","experiment","setExperiment","settingSummary","ma","cu","ex","i","resData","length","console","log","setResData","InitPostMethod","url","method","baseURL","withCredentials","valueOf","data","univ","sessionStorage","getItem","id","then","callback","response","catch","CallbackERROR","alert","window","location","href","columns","useMemo","accessor","Header","useEffect","univName","ids"],"mappings":"gYAAA,MAAO,GAAKA,CAAAA,KAAZ,KAAuB,OAAvB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,qBAA9B,CACA,MAAOC,CAAAA,sBAAP,KAAmC,0BAAnC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,6IAEA,cAAe,SAASC,CAAAA,mBAAT,EAA+B,CAE1C,oBAA0BJ,KAAK,CAACK,QAAN,CAAe,CAAf,CAA1B,oDAAOC,KAAP,qBAAcC,QAAd,qBACA,qBAA8BP,KAAK,CAACK,QAAN,CAAe,CAAf,CAA9B,qDAAOG,OAAP,qBAAgBC,UAAhB,qBACA,qBAAoCT,KAAK,CAACK,QAAN,CAAe,CAAf,CAApC,qDAAOK,UAAP,qBAAmBC,aAAnB,qBAEA;AACA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CACzB,GAAIC,CAAAA,EAAE,CAAG,CAAT,CACA,GAAIC,CAAAA,EAAE,CAAG,CAAT,CACA,GAAIC,CAAAA,EAAE,CAAG,CAAT,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAACC,OAAO,CAACC,MAA1B,CAAkCF,CAAC,EAAnC,CAAuC,CACnC,GAAIC,OAAO,CAACD,CAAD,CAAP,CAAW,kBAAX,IAAmC,IAAvC,CAA6C,CACzCG,OAAO,CAACC,GAAR,CAAY,GAAZ,EACAP,EAAE,CAAGA,EAAE,CAAGI,OAAO,CAACD,CAAD,CAAP,CAAW,gBAAX,CAAV,CACH,CAHD,IAGO,IAAIC,OAAO,CAACD,CAAD,CAAP,CAAW,kBAAX,IAAmC,IAAvC,CAA6C,CAChDG,OAAO,CAACC,GAAR,CAAY,GAAZ,EACAN,EAAE,CAAGA,EAAE,CAAGG,OAAO,CAACD,CAAD,CAAP,CAAW,gBAAX,CAAV,CACH,CAHM,IAGA,IAAIC,OAAO,CAACD,CAAD,CAAP,CAAW,kBAAX,IAAmC,IAAvC,CAA6C,CAChDG,OAAO,CAACC,GAAR,CAAY,EAAZ,EACAL,EAAE,CAAGA,EAAE,CAAGE,OAAO,CAACD,CAAD,CAAP,CAAW,gBAAX,CAAV,CACH,CACJ,CACDT,QAAQ,CAACM,EAAD,CAAR,CACAJ,UAAU,CAACK,EAAD,CAAV,CACAH,aAAa,CAACI,EAAD,CAAb,CACH,CAnBD,CAqBA;AACA,qBAA8Bf,KAAK,CAACK,QAAN,CAAe,EAAf,CAA9B,qDAAOY,OAAP,qBAAgBI,UAAhB,qBACA,GAAMC,CAAAA,cAAc,0FAAG,yJACbnB,CAAAA,KAAK,CAAC,CACRoB,GAAG,CAAE,oBADG,CAERC,MAAM,CAAE,MAFA,CAGRC,OAAO,CAAE,uBAHD,CAIRC,eAAe,CAAE,KAAKC,OAJd,CAKRC,IAAI,CAAE,CACFC,IAAI,CAAEC,cAAc,CAACC,OAAf,CAAuB,MAAvB,CADJ,CAEFC,EAAE,CAAEF,cAAc,CAACC,OAAf,CAAuB,IAAvB,CAFF,CALE,CAAD,CAAL,CAWLE,IAXK,CAWA,QAASC,CAAAA,QAAT,CAAkBC,QAAlB,CAA2B,CAC7B;AACAd,UAAU,CAACc,QAAQ,CAACP,IAAV,CAAV,CACH,CAdK,EAeLQ,KAfK,CAeC,QAASC,CAAAA,aAAT,CAAuBF,QAAvB,CAAgC,CACnChB,OAAO,CAACC,GAAR,CAAY,MAAZ,EACAkB,KAAK,CAAC,OAAD,CAAL,CACAC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,UAAvB,CACH,CAnBK,CADa,uDAAH,kBAAdnB,CAAAA,cAAc,0CAApB,CAuBA;AACA,GAAMoB,CAAAA,OAAO,CAAG1C,KAAK,CAAC2C,OAAN,CACZ,iBAAM,CACF,CACIC,QAAQ,CAAE,YADd,CAEIC,MAAM,CAAE,MAFZ,CADE,CAKF,CACID,QAAQ,CAAG,cADf,CAEIC,MAAM,CAAM,KAFhB,CALE,CASF,CACID,QAAQ,CAAE,eADd,CAEIC,MAAM,CAAE,IAFZ,CATE,CAaF,CACID,QAAQ,CAAE,mBADd,CAEIC,MAAM,CAAE,IAFZ,CAbE,CAiBF,CACID,QAAQ,CAAE,eADd,CAEIC,MAAM,CAAE,IAFZ,CAjBE,CAqBF,CACID,QAAQ,CAAG,kBADf,CAEIC,MAAM,CAAE,OAFZ,CArBE,CAyBF,CACID,QAAQ,CAAI,cADhB,CAEIC,MAAM,CAAE,IAFZ,CAzBE,CA6BF,CACID,QAAQ,CAAG,mBADf,CAEIC,MAAM,CAAE,IAFZ,CA7BE,CAiCF,CACID,QAAQ,CAAG,cADf,CAEIC,MAAM,CAAE,KAFZ,CAjCE,CAqCF,CACID,QAAQ,CAAG,gBADf,CAEIC,MAAM,CAAE,IAFZ,CArCE,CAAN,EADY,CA2CZ,EA3CY,CAAhB,CA6CA;AACA7C,KAAK,CAAC8C,SAAN,CAAgB,UAAM,CAClB,GAAMC,CAAAA,QAAQ,CAAGjB,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAAjB,CACA,GAAMiB,CAAAA,GAAG,CAAGlB,cAAc,CAACC,OAAf,CAAuB,IAAvB,CAAZ,CACA,GAAGgB,QAAQ,GAAK,EAAb,EAAmBC,GAAG,GAAK,EAA9B,CAAiC,CAC7B1B,cAAc,GACjB,CACJ,CAND,CAME,EANF,EAOA;AACAtB,KAAK,CAAC8C,SAAN,CAAgB,UAAM,CAClBlC,cAAc,GACjB,CAFD,EAIA,mBACI,wCACA,KAAC,iBAAD,EAAmB,OAAO,CAAE8B,OAA5B,CAAqC,IAAI,CAAEzB,OAA3C,EADA,cAEA,eAAO,MAAM,CAAC,GAAd,CAAkB,WAAW,CAAC,MAA9B,CAAqC,KAAK,CAAE,KAA5C,CAAkD,MAAM,CAAC,IAAzD,CAA8D,KAAK,CAAG,MAAtE,wBACI,WAAI,OAAO,CAAC,MAAZ,uCADJ,cAEI,WAAI,OAAO,CAAC,MAAZ,uCAFJ,cAGI,WAAI,OAAO,CAAC,MAAZ,uCAHJ,cAII,mCACI,oBAAKX,KAAL,EADJ,cAEI,oBAAKE,OAAL,EAFJ,cAGI,oBAAKE,UAAL,EAHJ,GAJJ,GAFA,cAYA,aAZA,cAYK,aAZL,cAYU,aAZV,cAYe,aAZf,cAaA,KAAC,sBAAD,EAAwB,IAAI,CAAEO,OAA9B,EAbA,GADJ,CAiBH","sourcesContent":["import * as React from 'react';\nimport MypageResultTable from './MypageResultTable'\nimport StudentMypageTimetable from './StudentMypageTimetable'\nimport axios from 'axios';\n\nexport default function StuEnrolmentpageBox() {\n\n    const [major, setMajor] = React.useState(0);\n    const [culture, setCulture] = React.useState(0);\n    const [experiment, setExperiment] = React.useState(0);\n\n    // 전공, 교양, 실험 학점 계산기\n    const settingSummary = () => {\n        var ma = 0;\n        var cu = 0;\n        var ex = 0;\n        for (var i = 0; i<resData.length; i++) {\n            if (resData[i][\"lecture_classify\"] === \"전공\") {\n                console.log(\"1\");\n                ma = ma + resData[i][\"lecture_credit\"];\n            } else if (resData[i][\"lecture_classify\"] === \"교양\") {\n                console.log(\"2\");\n                cu = cu + resData[i][\"lecture_credit\"];\n            } else if (resData[i][\"lecture_classify\"] === \"실험\") {\n                console.log(\"\");\n                ex = ex + resData[i][\"lecture_credit\"];\n            }\n        }\n        setMajor(ma);\n        setCulture(cu);\n        setExperiment(ex);\n    }\n\n    // 서버에 api 요청 (POST)\n    const [resData, setResData] = React.useState([]);\n    const InitPostMethod = async() => {\n        await axios({\n            url: 'api/student/Mypage',\n            method: 'POST',\n            baseURL: 'http://localhost:8080',\n            withCredentials: true.valueOf,\n            data: {\n                univ: sessionStorage.getItem('univ'),\n                id: sessionStorage.getItem('id'),\n            }\n        },\n        )\n        .then(function callback(response){\n            // Table data -> 서버에서 받은 데이터\n            setResData(response.data);\n        })\n        .catch(function CallbackERROR(response){\n            console.log('fail');\n            alert(\"ERROR\");\n            window.location.href = '/student';\n        });\n    }\n\n    // Define Column\n    const columns = React.useMemo(\n        () => [\n            {\n                accessor: 'lecture_id' ,\n                Header: '과목코드',\n            },\n            {\n                accessor:  'lecture_name' ,\n                Header:     '과목명',\n            },\n            {\n                accessor: 'lecture_major',\n                Header: '학과',\n            },\n            {\n                accessor: 'lecture_professor',\n                Header: '교수',\n            },\n            {\n                accessor: 'lecture_class',\n                Header: '학년',\n            },\n            {\n                accessor:  'lecture_classify' ,\n                Header: '전공/교양',\n            },\n            {\n                accessor:   'lecture_time',\n                Header: '시간',\n            },\n            {\n                accessor:  'lecture_classroom' ,\n                Header: '분반',\n            },\n            {\n                accessor:  'lecture_room' ,\n                Header: '강의실',\n            },\n            {\n                accessor:  'lecture_credit' ,\n                Header: '학점',\n            },\n        ],\n        []\n    );        \n    // 한번만 실행\n    React.useEffect(() => {\n        const univName = sessionStorage.getItem('univ');\n        const ids = sessionStorage.getItem('id');\n        if(univName !== \"\" && ids !== \"\"){\n            InitPostMethod();\n        }      \n    },[]);\n    // 값이 바뀔때마다 반복 실행\n    React.useEffect(() => { \n        settingSummary();\n    },);\n      \n    return (\n        <>\n        <MypageResultTable columns={columns} data={resData}></MypageResultTable>\n        <table border=\"1\" bordercolor=\"gray\" width =\"40%\" height=\"75\" align = \"left\" >\n            <th bgcolor=\"gray\">전공 학점</th>\n            <th bgcolor=\"gray\">교양 학점</th>\n            <th bgcolor=\"gray\">실험 학점</th>\n            <tr>\n                <td>{major}</td>\n                <td>{culture}</td>\n                <td>{experiment}</td>\n            </tr>\n        </table>\n        <br/><br/><br/><br/>\n        <StudentMypageTimetable data={resData}></StudentMypageTimetable>\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}