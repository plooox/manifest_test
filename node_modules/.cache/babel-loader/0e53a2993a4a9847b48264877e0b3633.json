{"ast":null,"code":"import _asyncToGenerator from\"/var/jenkins_home/workspace/pipeline-test/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/var/jenkins_home/workspace/pipeline-test/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/var/jenkins_home/workspace/pipeline-test/node_modules/@babel/runtime/regenerator/index.js\";import*as React from'react';import{Button}from'@mui/material';import ManagerBoxLayout from'./ManagerBoxLayout';import SearchLogTable from'./SearchLogTable';import TextField from\"@mui/material/TextField\";import SearchIcon from\"@mui/icons-material/Search\";import IconButton from\"@mui/material/IconButton\";import{Box}from'@mui/material';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ManagerSearchLogBox(){// Column 정보 입력\nvar columns=React.useMemo(function(){return[{accessor:'univ',Header:'학교'},{accessor:'id',Header:'학번'},{accessor:'lecture',Header:'과목코드'},{accessor:'semester',Header:'학기'},{accessor:'retake',Header:'재수강 여부'},{accessor:'register',Header:'신청 날짜'},{accessor:'modify',Header:'정정 날짜'},{accessor:'cancel',Header:'취소 날짜'}];},[]);// 서버에 api 요청 (GET)\nvar _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),resData=_React$useState2[0],setResData=_React$useState2[1];var handleGetMethod=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios({url:'api/manage/search',method:'POST',baseURL:'http://localhost:8080',withCredentials:true.valueOf,data:{univ:univName,studentId:id}}).then(function callback(response){// console.log(typeof(response.data[0]['cancel']));\nsetResData(response.data);}).catch(function CallbackERROR(response){});case 2:case\"end\":return _context.stop();}}},_callee);}));return function handleGetMethod(_x){return _ref.apply(this,arguments);};}();// 학번 검색 event handling\nvar _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),studentId=_React$useState4[0],setId=_React$useState4[1];var handleSearchStudentId=function handleSearchStudentId(e){e.preventDefault();console.log(univName);handleGetMethod(studentId);};var _React$useState5=React.useState(\"\"),_React$useState6=_slicedToArray(_React$useState5,2),univName=_React$useState6[0],setUniv=_React$useState6[1];React.useEffect(function(){var univ=sessionStorage.getItem('univ');if(univ){setUniv(univ);}},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Box,{sx:{m:4,display:'flex',flexwrap:'wrap'},children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearchStudentId,children:[/*#__PURE__*/_jsx(TextField,{name:\"filter\",type:\"search\",variant:\"standard\",placeholder:\"\\uD559\\uBC88\",onChange:function onChange(e){setId(e.target.value);}}),/*#__PURE__*/_jsx(IconButton,{type:\"submit\",sx:{p:\"10px\"},\"aria-label\":\"search\",children:/*#__PURE__*/_jsx(SearchIcon,{})})]})}),/*#__PURE__*/_jsx(ManagerBoxLayout,{children:/*#__PURE__*/_jsx(SearchLogTable,{columns:columns,data:resData})})]});}","map":{"version":3,"sources":["/var/jenkins_home/workspace/pipeline-test/src/components/views/ManagerSearchLogBox.js"],"names":["React","Button","ManagerBoxLayout","SearchLogTable","TextField","SearchIcon","IconButton","Box","axios","ManagerSearchLogBox","columns","useMemo","accessor","Header","useState","resData","setResData","handleGetMethod","id","url","method","baseURL","withCredentials","valueOf","data","univ","univName","studentId","then","callback","response","catch","CallbackERROR","setId","handleSearchStudentId","e","preventDefault","console","log","setUniv","useEffect","sessionStorage","getItem","m","display","flexwrap","target","value","p"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { Button } from '@mui/material';\nimport ManagerBoxLayout from './ManagerBoxLayout';\nimport SearchLogTable from './SearchLogTable';\nimport TextField from \"@mui/material/TextField\";\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport IconButton from \"@mui/material/IconButton\";\nimport { Box } from '@mui/material';\nimport axios from 'axios';\n\nexport default function ManagerSearchLogBox() {\n    // Column 정보 입력\n    const columns = React.useMemo(\n        () => [\n            {\n                accessor:  'univ' ,\n                Header: '학교'\n            },\n            {\n                accessor: 'id',\n                Header: '학번'\n            },\n            {\n                accessor: 'lecture' ,\n                Header: '과목코드',\n            },\n            {\n                accessor: 'semester',\n                Header: '학기'\n            },\n            {\n                accessor:   'retake',\n                Header: '재수강 여부'\n            },\n            {\n                accessor:   'register',\n                Header: '신청 날짜'\n            },\n            {\n                accessor:  'modify' ,\n                Header: '정정 날짜'\n            },\n            {\n                accessor:   'cancel',\n                Header: '취소 날짜'\n            },\n        ],\n        []\n    );\n\n    // 서버에 api 요청 (GET)\n    const [resData, setResData] = React.useState([]);\n    const handleGetMethod = async(id) => {\n        await axios({\n            url: 'api/manage/search',\n            method: 'POST',\n            baseURL: 'http://localhost:8080',\n            withCredentials: true.valueOf,\n            data: {\n                univ: univName,\n                studentId: id,\n            }\n        })\n        .then(function callback(response){\n            // console.log(typeof(response.data[0]['cancel']));\n            setResData(response.data);\n        })\n        .catch(function CallbackERROR(response){\n\n        });\n    }\n\n    // 학번 검색 event handling\n    const [studentId, setId] = React.useState(\"\");\n    const handleSearchStudentId = (e) => {\n        e.preventDefault();\n        console.log(univName);\n\n        handleGetMethod(studentId);\n    }\n\n    const [univName, setUniv] = React.useState(\"\");\n    React.useEffect(() => {\n        const univ = sessionStorage.getItem('univ');\n        if(univ){\n            setUniv(univ);\n        }\n    },[]);\n      \n    return (\n        <>\n            {/* 학번 검색 */}\n            <Box sx={{m: 4, display: 'flex', flexwrap: 'wrap'}}>\n                <form onSubmit={handleSearchStudentId}>\n                    <TextField name=\"filter\" type=\"search\" variant=\"standard\" placeholder=\"학번\" onChange={(e) => {setId(e.target.value)}}/>\n                    <IconButton type=\"submit\" sx={{ p: \"10px\" }} aria-label=\"search\">\n                        <SearchIcon />\n                </IconButton>\n                </form>\n            </Box>\n            <ManagerBoxLayout>\n                <SearchLogTable columns={columns} data={resData}></SearchLogTable>\n            </ManagerBoxLayout>\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}